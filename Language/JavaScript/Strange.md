# 奇妙なJS

たまに回ってくる奇妙なJSを残しておこうかなと。

## x = 0 されど x は3以上

```js
const x = 0;
if ( x => 3 ) { console.log( 'x => 3 ... ', x ); }
```

```txt
x => 3 ...  0
```

### 解説

```js
const a = x => 3;
typeof a;               // "function"
a();                    // 3
```

JSの関数定義は `function NAME(){}` とか `const NAME = () => {}` とかあるわけですが後者のアロー演算子は省略形で ` 引数 => 返り値` という記法で定義可能です。
で、関数は空ではないので真偽値はtrueになります。

回避方法はいくつかあります。

```js
if ( 3 => x ) {} // 式の意味は違うが数値が先なら今回みたいなことにはならない。
```

有名な `if ( x == 1 ){}` を間違えて `if ( x = 1 ){}` と書いてもエラーにならず正常に実行されるのを回避するために `if ( 0 == x ){}` というように数値を先に持ってくるといいよ。って書き方は今回のケースでも有効です。

また個人的には必ず不等式は `小 < 大` になるように書いているので、こうしておけば今回のケースは回避可能です。

```js
if ( x <= 3 ){} // 式の意味は違うがこの並びを維持するなら今回みたいなことにはならない。
```

## banana

```js
('b' + 'a' + + 'a' + 'a' ).toLocaleLowerCase();
```

```txt
"banana"
```

### 解説

`+'2'` のように数値っぽいものに±をつけると無理やり数値にすることができる。（型変換）

ここで `+'a'` はどうあがいても文字にできないので `NaN` になる。
これを前提に考えると上の内容は以下になる。

```js
('b' + 'a' + + 'a' + 'a' ).toLocaleLowerCase();
('b' + 'a' + (+'a') + 'a' ).toLocaleLowerCase();
('b' + 'a' + 'NaN' + 'a' ).toLocaleLowerCase();
('baNaNa' ).toLocaleLowerCase();
'banana'
```

