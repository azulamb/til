# TypeScriptについて

TypeScriptは型付きのJavaScriptです。Microsoftが開発しました。
JavaScriptは大規模開発に向いていないのと、そのための様々な機能が追加されることもあり、JavaScriptの先の仕様を元に、型を搭載した言語として開発されました。

基本的にTypeScriptはそれ自体で実行できるものではなく、JavaScriptに変換するトランスパイルという作業を行うものなので、トランスパイラの仲間です。

## TypeScriptのメリット

メリットは主に2つあります。

* JavaScriptの新しい構文などを使える
* 型がある

前者は等価な処理に変換されるため、例えばclassがないころのJavaScriptでは関数を使った疑似クラスを用いていましたが、TypeScriptでは普通にclassでクラスを扱い、実行対象がclass構文がない頃を対象とした場合、関数ベースのものに変換して出力されます。
同じように出力対象を変更すれば、まだJavaScriptが対応していない機能もいい感じにしてくれるでしょう。

後者はある意味型は邪魔ではないかと思う人もいると思います。
しかし、JavaScriptは非常に柔軟で様々なことが可能なため、大規模なプログラムになるとちょっとした変更が大規模なバグになりかねません。

型をつけておけば、データの形が変わったりメソッドが廃止された時、コンパイル時に使用している箇所がすぐにエラーとなるため、修正箇所が容易にわかります。
これにより、リファクタリングもかなり楽になるでしょう。

また、型を定義するということは、正確な型情報をIDEやエディタが把握しやすいということになります。
これにより、自動補完などの精度も非常に高いものを使うことができるため、開発速度も上がるでしょう。

後、人は縛りをいれなければマジで好き勝手やります。JavaScriptはただでさえカオスになりやすいのに、縛りを設けないまま使えば、そのうち悲惨なことになるでしょう。

### 余談: Flowtype

JavaScriptに型をつけるFlowtypeというものがあります。
後付で型検査ができるらしいのですが（使ったことない）、実際に既存プロジェクトのコードにFlowtypeを導入した人曰く「次は最初からTypeScriptにしよう」だったらしいので、初めから型をつけて書くならTypeScriptを使った方が良いかもしれません。

また、出力されるコードはきれい（というかほぼ書いたまま）ですので、やはりJavaScriptで書くことになっても、最後に出力したコードを使えます。
CoffieeScriptなどのように全く別文法というわけでもないので、学習コストがそこそこ低く、気軽に捨てることも可能というのは重要な点かと思います。

## デメリット

もちろんTypeScriptにもデメリットがあります。

* プロジェクトがTypeScriptで完結しない場合、複数回コンパイルが必要(ビルド環境を整えるのが大変)
* 型定義のないor古いモジュールは使うのに苦労する（使いたくないので選ばない）
* 型の文法が微妙にトリッキーだったりするので、それを使いこなすのが難しい

### ビルド環境の整備

TypeScriptはトランスパイラなので、JavaScriptに変換する必要があります。
なので、TypeScriptで完結しない場合に、いろいろ手間が発生します。

特に、ファイルを一つにまとめてブラウザ用に圧縮する場合、TypeScriptのコンパイル→出力されたコードとモジュールを結合するためにコンパイル、といった手順を踏む必要があります。

これに関しては他のトランスパイラを使っている人ならまぁいいかもしれませんが、初心者には結構ハードルが高いです。

ちなみに、TypeScriptで完結する場合、設定ファイルを書けば他の環境にもすぐ持ち運べるので、一度整えれば逆にかなり楽です。

### 型定義のないモジュール

Node.jsはnpmというもので世界中の開発者が公開しているモジュールを使いこなす形で発展してきました。
便利なモジュールが多いので多少複雑なことも簡単にできるのですが、問題があります。

TypeScriptから外部JSで書かれた処理を使うためには、型定義が必要です。
正確にはなくても別に問題はないのですが、型定義がないためやりたい放題かつ補完などの恩恵が受けられないため、TypeScriptに慣れきってしまうともう無理です。

モジュールはTypeScriptで書かれて型定義ファイルまで含まれていればインストールだけで良いですが、大半のモジュールは型定義がないため、TypeScriptとの連携は最悪でしょう。

ただし、有名なモジュールについては有志が型定義のみのモジュールを公開してくれているので、それを利用させてもらいましょう。

（これについてはどこかで書きますが、モジュールの目星をつける→型定義を探す→ないなら別のモジュールを探す、というサイクルでモジュールを選定するようになります。）

ただし、この型定義だけのモジュールは気をつけるべき点が一つあります。
それは、バージョンが古くて最新に追いついてない可能性があることです。
破壊的変更があったモジュールの場合、TypeScriptで書いた部分が全く動かずエラー祭りになる可能性があります。
場合によっては、ドキュメントを読みながら自分で型定義を書くことになるでしょう。辛い！

#### 世界の開発者へ

ライブラリやモジュールを作って公開する人は、とにかくみんなTypeScriptで書いて型定義を出すべき。
世界が平和になる。本当に。

### 文法が多少トリッキー

TypeScriptの基本の文法はJavaScriptで、型の書き方も後置ではありますがそこまで難しいものではありません。

しかし、複雑な型を定義しようとすると、たちまち躓くことになるでしょう。

### デメリットはあるものの……

デメリットについてはいろいろ書きましたが、これらのデメリットを克服すれば、かなりパラダイスです。
っていうかデメリットの大半はプロジェクトの環境構築が大変という話なので、そこさえなんとかする技術を身につければ、TypeScriptは使い放題です。
（TypeScript自体の環境構築は楽）

ここではぼくがいろいろ躓いたことを補完しながらTypeScriptの基礎部分について書いていこうと思うので、ぜひTypeScriptを身につけましょう！


## その他

### 開発環境について

TypeScriptの開発環境はいろいろあります。
特に補完などを行う部分が独立して使えるため、その機構を使えるエディタやIDEはちょっと設定したりインストールすればすぐにTypeScriptを使えるようになります。

一応簡単に書いておくと、VisualStudio、VisualStudio CodeはMicrosoftの製品なので当然として、Sublime Text 3もMicrosoftが提供するプラグインがあるため、それをインストールすれば補完などが可能になります。
なので、わりと好みで環境は選んでも良いかなと思います、

### TypeScriptの実行環境について

TypeScriptのファイルを渡すと内部的にビルドして実行してくれる環境を、Node.jsを作った人が作っているそうです。

https://github.com/ry/deno

めっちゃ期待してます。

### ビルドについて

Reactなどを何も考えずTypeScriptを使ってぱっと開発したい場合、Parcelを使うと楽です。

https://parceljs.org/

正直ファイル名の固定ができなかったりして本番投入はまず無理な感じがしますが、まず環境を整えて試しに使ってみるには非常に有用です。
Node.jsにおける開発をバリバリやっている人は、こちらを使うと大変楽でしょう。

こちらでもモジュールを使う場合はまずParcelで試した後、他の手法について書ければなと思っています。

