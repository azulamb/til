`var` について。
一旦別ファイルに退避しておく。

# var

元々のJavaScriptにある唯一の変数を宣言するキーワードでした。

よくある変数にあるように値を再代入できます。

```
// 数値を入れる変数
var num = 0;

// 別に後から文字列を代入しても良い
num = 'test';
```

ただ、このスコープがかなり特殊です。

まずは普通のパターン。

```
var global = 1;

// 関数の宣言
function func() {
    // これはローカル変数として使われるので、上のglobalとは別物
    var global = 3;
    console.log( 'func:', global );
}

console.log( global );
global = 2;
func();
console.log( global );
```

結果は以下です。

```
1
func: 3
2
```

では次のようなケースはどうでしょう？

```
console.log( i );

// 5回同じことを繰り返すfor文。別のページでちゃんと扱います。
for ( var i = 0 ; i < 5 ; ++i ) {
    // iは0,1,2,3,4という値が順番に代入されます。
    console.log( i );
}
```

1行目で宣言していない変数を使っているので、今までの常識ならエラーになります。

結果は以下です。

```
undefined
0
1
2
3
4
```

何故かエラーになりません。

JavaScriptの場合、`var` で宣言した場合処理の一番始めで宣言された状態になります。なので上のコードは以下と等価です。

```
var i;

console.log( i );

for ( i = 0 ; i < 5 ; ++i ) {
    console.log( i );
}
```

iという変数はあるが、中身には何も入れていないので、undefinedという結果をまず出力し、後はループ文では開始時に0を代入されたのでそこから演算をしています。

最後に、次のような場合はどうでしょうか？

```
console.log( i );

// 関数の宣言
function func() {
    var i = 0;
    console.log( i );
}
```

こちらは1行目で宣言されていない変数を使用しているのでエラーです。

`function`の中で宣言してるじゃないか！ッとなると思いますが、`var` は関数スコープなので、関数内で宣言された変数は外に影響を与えません。

なので、`var` は以下のような特徴を持っています。

* 関数内で宣言した場合、関数の一番最初に変数を宣言した扱いとなる
* 関数外（グローバル）な環境で宣言した場合、処理の一番始めに変数を宣言した扱いとなる
* 関数内で宣言した変数は、外に影響を与えない\
