# まとめ

このページを1行でまとめると以下です。

変数宣言に使う優先度は `const` >>> `let` >>>>>>>>越えられない壁>>>>>>>> `var`

# 宣言・定義

これから扱う変数や、一部の処理をまとめた関数と呼ばれるものは、宣言や定義と呼ばれる行為をする必要があります。

早い話、こういう名前の変数が存在するから！とか、こういう関数は使ってもいいから！みたいなことを言わないといけないと思ってください。

# 変数

変数とは、プログラミングにおいて値を入れておく箱であるとよく言われます。
箱に名前をつけて使えるようにすることを宣言、箱に値を入れることを代入と呼びます。

JavaScriptの変数は以下のように宣言して使います。

```
// test という変数を宣言して、Test string!! という文字列を代入する。
let test = "Test string!!";

// 画面に変数testに入っているものを表示する。
console.log( test );

// testに1という数値を代入する。
test = 1;

// 画面に変数testに入っているものを表示する。
console.log( test );
```

`console.log( 表示したいデータもしくは変数 )` で画面に文字を出力してくれます。
結果は次のようになります。

```
Test string!!
1
```

`let` が変数の宣言に使われるもので、`let 変数名` で変数を宣言できます。
JavaScriptでは宣言されてない変数や定義されていない関数をそのまま使おうとするとエラーになります。

```
// これだけだとエラー
console.log( test );
```

型についての話でも述べますが、JavaScriptの変数には何でも入れることが出来ます。

# スコープ

JavaScriptの変数の宣言は以下3種類です。

* `var`
    * 再代入可能。関数スコープ。
* `let`
    * 再代入可能。ブロックスコープ。
* `const`
    * 再代入不可能。ブロックスコープ。
    
JavaScriptの変数には何でも入れることができるので、差異は違変数に値を再代入可能かどうかと、その変数を使うことができる有効範囲=スコープの違いのみとなります。

## var

昔のJavaScriptでは `var` しか使えませんでした。
しかし、この `var` は関数スコープという独特なスコープな他、独特な宣言のされかたもするため、かなり混乱するので、使わないでください。
後述する `let` と `const` で大体解決します。

ただ、古いブラウザ向けに書かれたJavaScript等は未だに `var` を使っているので、`var` の存在だけは頭の片隅に入れ、使わないようにしてください。

## letとconst

最近のJavaScriptには新しい変数の宣言として `let` と `const` が追加されました。
大体のブラウザでは使えるので、こちらを使っていきましょう。

すでに一度使っているので、今回はスコープについて扱います。


```
{
    let i = 0;
    console.log( i );
}

console.log( i );
```

こちらのコードですが、6行目がエラーになります。
`let` と `const` はスコープがブロック内となっています。

このブロックとは、上で言う `{ ここのこと }` を指します。
ブロックスコープとは、 `{` と `}` に囲まれた内側で有効な変数です。

このブロックの外側で宣言された場合は一つ外側のブロックの中からはアクセスできるので、以下のような場合は大丈夫です。

```
{
    let i = 0;
    {
        console.log( i );
    }
}
```

## const

では、constは何のためにあるのか？
一応効果では再代入不可能となっています。

```
const pi = 3.14;
pi = 3;
```

この場合次のようなエラーが発生します。

```
pi = 3;
   ^

TypeError: Assignment to constant variable.
```

このように初回以外の代入はすべてエラーとなるため、定数などの宣言に使うことが推奨されます。

……っと言いたいところですが、こちら、基本は `const` を使うようにしましょう。

理由としては、再代入により型が変わったり使い方が変わることで、バグの温床になりかねないからです。
逆に言えば、`const` で宣言された変数は今後変な値を代入されることはないため、デバッグの助けになります。

そのため、基本的に変数はすべて `const` で宣言し、どうしてもループで使いたいなどの時に限り `let` を使うようにします。

とりあえず `let` と `const` があれば必ず `var` を使わなければならない状況というものは基本ないので、`var` は使わないようにしましょう。
4年以上使ってますが、一度も `var` じゃないと無理なコードを書いたことはありません。

何度も書きますが、基本は `const` のみ使い、どうしても再代入必要な変数だけ `let` にして、本当に `var` でなければ動かないコードの時のみ `var` を使うようにしましょう。
