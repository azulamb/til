# この記事を1行で

このページを1行でまとめると以下です。

変数宣言に使う優先度は `const` >>> `let` >>>>>>>>越えられない壁>>>>>>>> `var`

# スコープ

JavaScriptの変数の宣言は以下3種類です。

* `var`
    * 再代入可能。関数スコープ。
* `let`
    * 再代入可能。ブロックスコープ。
* `const`
    * 再代入不可能。ブロックスコープ。
    
JavaScriptの変数には何でも入れることができるので、差異は違変数に値を再代入可能かどうかと、その変数を使うことができる有効範囲=スコープの違いのみとなります。

## var

昔のJavaScriptでは `var` しか使えませんでした。
しかし、この `var` は関数スコープという独特なスコープな他、独特な宣言のされかたもするため、かなり混乱するので、使わないでください。
後述する `let` と `const` で大体解決します。

ただ、古いブラウザ向けに書かれたJavaScript等は未だに `var` を使っているので、`var` の存在だけは頭の片隅に入れ、使わないようにしてください。

## letとconst

最近のJavaScriptには新しい変数の宣言として `let` と `const` が追加されました。
大体のブラウザでは使えるので、こちらを使っていきましょう。

すでに一度使っているので、今回はスコープについて扱います。


```
{
    let i = 0;
    console.log( i );
}

console.log( i );
```

こちらのコードですが、6行目がエラーになります。
`let` と `const` はスコープがブロック内となっています。

このブロックとは、上で言う `{ ここのこと }` を指します。
ブロックスコープとは、 `{` と `}` に囲まれた内側で有効な変数です。

このブロックの外側で宣言された場合は一つ外側のブロックの中からはアクセスできるので、以下のような場合は大丈夫です。

```
{
    let i = 0;
    {
        console.log( i );
    }
}
```

## const

では、constは何のためにあるのか？
一応効果では再代入不可能となっています。

```
const pi = 3.14;
pi = 3;
```

この場合次のようなエラーが発生します。

```
pi = 3;
   ^

TypeError: Assignment to constant variable.
```

このように初回以外の代入はすべてエラーとなるため、定数などの宣言に使うことが推奨されます。

……っと言いたいところですが、基本変数には `const` を使うようにしましょう。

理由としては、再代入により型が変わったり使い方が変わることで、バグの温床になりかねないからです。
逆に言えば、`const` で宣言された変数は今後変な値を代入されることはないため、デバッグの助けになります。

そのため、基本的に変数はすべて `const` で宣言し、どうしてもループで使いたいなどの時に限り `let` を使うようにします。

また、この記事はTypeScriptを使うための下準備としてのJavaScriptの基礎なので予告的に書くのですが、TypeScriptでは型が変わる変数も作れなくはないものの、下準備が必要だったりあちこちでエラーが出るため `const` を使っておいたほうがプログラミングが楽になります。

# まとめ

変数の宣言は基本 `const` を使い、どうしても再代入必要な場合だけ `let` を使いましょう。
