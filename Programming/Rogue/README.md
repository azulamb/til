# ローグライクの自動生成マップ

ローグライクのマップを自動生成するのに有名な手法があるのでそのまとめと実装の方針などについて。

# 基本的な流れ

ローグライクでよくあるマップは以下のような流れで作られています。

* フロアを区切る
* 区切った中でランダムな大きさの部屋を作る
* 各部屋を道でつなぐ
* すべての部屋にたどり着けるように道を消す

ただいろいろ困難なこともあるので、実際には以下のような手順で作成するのが良いかなと思います。

* フロアを区切る
* 区切られた部屋の作られる領域をつなぐ道の一覧を作る
* 道をランダムに並び替える
* 道を上から順番に消す
    * ただし消した後すべての部屋にたどり着けない場合、道を元に戻す
* ランダムな大きさの部屋を作る
* 残った道情報を元に部屋をつなぐ

順番に見ていきます。

# フロアを区切る

例えばフロアを4部屋に分割する場合以下のようなケースが考えられます。

```
┏━━┳━━┓ ┏━┳━━━┓ ┏━┳━━━┓ 
┃  ┃  ┃ ┃ ┃   ┃ ┣━╋━━━┫
┣━━╋━━┫ ┣━╋━━━┫ ┃ ┃   ┃
┃  ┃  ┃ ┃ ┃   ┃ ┃ ┃   ┃
┗━━┻━━┛ ┗━┻━━━┛ ┗━┻━━━┛ 
```

ここら辺は部屋が作れる規模で分割できれば良いでしょう。



